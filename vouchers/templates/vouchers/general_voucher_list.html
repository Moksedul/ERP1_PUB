{% extends 'main/base.html' %}
{% load static %}
{% block content %}
<!--<div class="card card-body">-->
	<div class=" card card-body">
		<input class="form-control-sm" id="myInput" type="text" placeholder="Type to Search..">
			<a class="btn btn-secondary  btn-sm btn-block bg-steel" href="{% url 'add-general-voucher'%}">Add General Voucher</a>
			<div class="table-container">
				<table id="myTable" class="table table-sm table-striped table-bordered">
				<tr>
					<th>Voucher Number</th>
					<th>Person Name</th>
					<th>Cost Descriptions</th>
					<th>Amount</th>
					<th>Date</th>
					<th>Update</th>
					<th>Remove</th>
				</tr>
				<tbody class="infinite-container">
				{% for voucher in vouchers %}
					<tr class="infinite-item">
						<td>{{ voucher.voucher_number }}</td>
						<td>{{ voucher.person_name }}</td>
						<td>{{ voucher.cost_Descriptions }}</td>
						<td>{{ voucher.cost_amount }}</td>
						<td>{{ voucher.date_added }}</td>

						{% if voucher.transaction  %}
								<td><a class="btn btn-sm btn-secondary" onclick="alertEdit()" href="#">Edit</a></td>
								<td><a class="btn btn-sm btn-secondary" onclick="alertDelete()" href="#">Delete</a></td>
						{% else %}
								<td><a class="btn btn-sm btn-info" href="{% url 'general-voucher-update' voucher.id%}">Edit</a></td>
								<td><a class="btn btn-sm btn-danger" href="{% url 'general-voucher-delete' voucher.id%}">Delete</a></td>
						{%endif%}
					</tr>
				{% endfor %}
				</tbody>

			</table>
			</div>
		</div>
		<div class="mt-3 float-right">
		        {% if is_paginated %}
					{% if page_obj.has_next %}
						<a class="infinite-more-link" href="?page={{ page_obj.next_page_number }}"></a>
					{% endif %}

        		{% endif %}
		</div>


<script>
function alertEdit() {
  alert("General Voucher With Bkash Transaction Can't be edited");
}

function alertDelete() {
  alert("General Voucher With Bkash Transaction Can't be deleted");
}
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script type="text/javascript" src="{% static 'main/js/jquery.waypoints.min.js' %}"></script>
<script type="text/javascript" src="{% static 'main/js/infinite.min.js' %}"></script>


<script>
var infinite = new Waypoint.Infinite({
	element: $('.infinite-container')[0],
	context: $('.table-container'),

	offset: 'bottom-in-view',

	onBeforePageLoad: function () {
		$('.loading').show();
	},
	onAfterPageLoad: function () {
		$('.loading').hide();
	}
});
</script>
{% endblock content %}